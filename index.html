<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EDX â€” EduData Exchange</title>
  <meta name="description" content="EduData Exchange (EDX): standards-first ingestion, governance, and publishing for Education." />
  <meta name="color-scheme" content="light dark" />
  <!-- Minimum viable CSP for static preview; prefer server headers in prod -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 script-src 'self' https://cdn.jsdelivr.net;
                 style-src 'self' https://cdn.jsdelivr.net;
                 font-src 'self' https://cdn.jsdelivr.net data:;
                 img-src 'self' data:;
                 connect-src 'self';
                 frame-ancestors 'none';
                 base-uri 'self';
                 form-action 'self'">

  <!-- Bootstrap CSS (CDN with SRI) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous">

  <!-- Bootstrap Icons (CDN with SRI) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    rel="stylesheet"
    integrity="sha384-tViUnnbYAV00FLIhhi3v/dWt3Jxw4gZQcNoSCxCIFNJVCx7/D55/wXsrNIRANwdD"
    crossorigin="anonymous">

  <!-- App CSS (global first, then page-local) -->
  <link rel="stylesheet" href="assets/css/edx-global.css">
  <link rel="stylesheet" href="assets/css/index.css">
</head>

<body>
  <!-- Partials mount points -->
  <div id="app-header"></div>

  <main id="main" class="container my-4" tabindex="-1" role="main" aria-label="Home">
    <!-- Page header / system status -->
    <header class="mb-4">
      <div class="d-flex flex-wrap align-items-center justify-content-between gap-2">
        <div>
          <h1 class="h3 mb-1">Welcome to EDX</h1>
          <p class="text-body-secondary mb-0">Standards-first ingestion, governance & publishing for Education.</p>
        </div>
        <div class="text-end">
          <span class="status-dot status-ok" aria-hidden="true"></span>
          <span class="small text-body-secondary">Platform status: <strong>Operational</strong></span>
        </div>
      </div>
    </header>

    <!-- Role workspaces -->
    <section aria-label="Choose a workspace">
      <div class="row g-3">
        <div class="col-12 col-md-6 col-xl-3">
          <div class="card card-role h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-shield-lock me-2 fs-5" aria-hidden="true"></i>
                <h2 class="h5 mb-0">Platform Admin</h2>
              </div>
              <p class="small text-body-secondary flex-grow-1 mb-3">
                Tenants, users &amp; roles, policies, audit, SSO &amp; secrets.
              </p>
              <div class="d-flex gap-2">
                <a class="btn btn-primary btn-sm" href="pages/admin/landing.html">Open</a>
                <button class="btn btn-outline-secondary btn-sm" type="button"
                        data-bs-toggle="collapse" data-bs-target="#tips-admin"
                        aria-expanded="false" aria-controls="tips-admin">Tips</button>
              </div>
              <div class="collapse mt-2" id="tips-admin">
                <ul class="small mb-0">
                  <li>Set up SSO/SCIM before onboarding connectors.</li>
                  <li>Apply masking & row policies early.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-6 col-xl-3">
          <div class="card card-role h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-diagram-3 me-2 fs-5" aria-hidden="true"></i>
                <h2 class="h5 mb-0">Data Engineer</h2>
              </div>
              <p class="small text-body-secondary flex-grow-1 mb-3">
                Connectors, pipelines, schedules, mappings, retries &amp; quarantines.
              </p>
              <div class="d-flex gap-2">
                <a class="btn btn-primary btn-sm" href="pages/engineer/landing.html">Open</a>
                <button class="btn btn-outline-secondary btn-sm" type="button"
                        data-bs-toggle="collapse" data-bs-target="#tips-eng"
                        aria-expanded="false" aria-controls="tips-eng">Tips</button>
              </div>
              <div class="collapse mt-2" id="tips-eng">
                <ul class="small mb-0">
                  <li>Use mapping templates for Ed-Fi/OneRoster/CEDS.</li>
                  <li>Promotion to publish requires DQ gates.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-6 col-xl-3">
          <div class="card card-role h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-check2-square me-2 fs-5" aria-hidden="true"></i>
                <h2 class="h5 mb-0">Data Steward</h2>
              </div>
              <p class="small text-body-secondary flex-grow-1 mb-3">
                DQ rules, drift review, approvals, catalog, lineage &amp; glossary.
              </p>
              <div class="d-flex gap-2">
                <a class="btn btn-primary btn-sm" href="pages/steward/landing.html">Open</a>
                <button class="btn btn-outline-secondary btn-sm" type="button"
                        data-bs-toggle="collapse" data-bs-target="#tips-steward"
                        aria-expanded="false" aria-controls="tips-steward">Tips</button>
              </div>
              <div class="collapse mt-2" id="tips-steward">
                <ul class="small mb-0">
                  <li>Approve promotions only after DQ thresholds pass.</li>
                  <li>Align glossary with Ed-Fi/OneRoster/CEDS.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-md-6 col-xl-3">
          <div class="card card-role h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-box-arrow-down me-2 fs-5" aria-hidden="true"></i>
                <h2 class="h5 mb-0">Data Consumer</h2>
              </div>
              <p class="small text-body-secondary flex-grow-1 mb-3">
                Read governed views &amp; APIs, request exports, manage subscriptions.
              </p>
              <div class="d-flex gap-2">
                <a class="btn btn-primary btn-sm" href="pages/consumer/landing.html">Open</a>
                <button class="btn btn-outline-secondary btn-sm" type="button"
                        data-bs-toggle="collapse" data-bs-target="#tips-consumer"
                        aria-expanded="false" aria-controls="tips-consumer">Tips</button>
              </div>
              <div class="collapse mt-2" id="tips-consumer">
                <ul class="small mb-0">
                  <li>Masked PII & row filters apply to all reads.</li>
                  <li>Use subscriptions for scheduled exports.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- Quick KPIs -->
    <section class="mt-4" aria-label="Quick operational signals">
      <div class="row g-3">
        <div class="col-6 col-lg-3">
          <div class="kpi">
            <div class="small text-body-secondary">Published datasets</div>
            <div class="fs-4 value">48</div>
            <div class="small text-body-secondary">Last 24h: +2</div>
          </div>
        </div>
        <div class="col-6 col-lg-3">
          <div class="kpi">
            <div class="small text-body-secondary">Pipelines healthy</div>
            <div class="fs-4 value">31 / 34</div>
            <div class="small text-body-secondary">
              <span class="status-dot status-warn" aria-hidden="true"></span>3 investigating
            </div>
          </div>
        </div>
        <div class="col-6 col-lg-3">
          <div class="kpi">
            <div class="small text-body-secondary">Open alerts</div>
            <div class="fs-4 value">2</div>
            <div class="small text-body-secondary">Both acknowledged</div>
          </div>
        </div>
        <div class="col-6 col-lg-3">
          <div class="kpi">
            <div class="small text-body-secondary">Active subscriptions</div>
            <div class="fs-4 value">22</div>
            <div class="small text-body-secondary">Failed retries: 0</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Recent Activity (JSON-fed, accessible pagination handled by index.js) -->
    <section class="mt-4" aria-labelledby="recentActivityHeading">
      <h2 id="recentActivityHeading" class="h5 mb-2">Recent Activity</h2>

      <div class="table-responsive"
           data-edx-paginate
           data-edx-pagekey="home:recent-activity"
           data-edx-pagesize="10"
           data-edx-datasource="assets/data/recent-activity.json">
        <table class="table table-sm align-middle table-hover mb-0" aria-describedby="activityCaption">
          <caption id="activityCaption" class="text-body-secondary">
            Governed actions across connectors, pipelines, DQ, and publishing.
          </caption>
          <thead class="table-light">
          <tr>
            <th scope="col">When</th>
            <th scope="col">Area</th>
            <th scope="col">Action</th>
            <th scope="col">Actor</th>
            <th scope="col">Result</th>
          </tr>
          </thead>
          <tbody id="activityBody">
          <!-- Populated by JS -->
          </tbody>
        </table>
        <!-- Controls auto-generated by index.js -->
      </div>
    </section>
  </main>

  <div id="app-footer"></div>

  <!-- Vendor JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

  <!-- App JS (partials first, then core) -->
  <script src="assets/js/partials-loader.js"></script>
  <script src="assets/js/index.js"></script>
</body>
</html>
